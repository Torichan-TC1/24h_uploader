<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>24時間アップローダー</title>
</head>
<body>
    <h1>24時間アップローダー</h1>

    <!-- 残り時間の表示 -->
    <div>
        <h2>残り時間</h2>
        <p id="timer"></p>
    </div>

    <!-- ページコンテンツ（個別のページで上書きされる部分） -->
    {% block content %}
    {% endblock %}

    <!-- フッター部分 -->
    <footer>
        <p>© 2025 24時間アップローダー</p>
    </footer>

    <script>
        {% if end_time %}
            const endTime = new Date("{{ end_time.isoformat() }}");
        {% else %}
            const endTime = new Date();  // end_timeがない場合、現在時刻を使用
        {% endif %}

        function updateTimer() {
            const now = new Date();
            const diff = endTime - now;

            if (diff <= 0) {
                document.getElementById("timer").innerText = "00:00:00.00";
                location.href = "/delete_photos";  // 時間切れになったらリダイレクト
                return;
            }

            const h = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, '0');
            const m = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
            const s = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');
            const cs = String(Math.floor((diff % 1000) / 10)).padStart(2, '0');

            document.getElementById("timer").innerText = `${h}:${m}:${s}.${cs}`;
        }

        setInterval(updateTimer, 10); // 1/100秒ごとにタイマーを更新
        updateTimer();  // 初回のタイマー更新
    </script>
</body>
</html>


